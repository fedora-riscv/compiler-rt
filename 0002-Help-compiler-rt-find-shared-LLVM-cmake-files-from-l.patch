From 8d0c32ac06206e9d708c231fbe608d6fdd150c71 Mon Sep 17 00:00:00 2001
From: Konrad Kleine <kkleine@redhat.com>
Date: Wed, 20 Oct 2021 18:12:24 +0200
Subject: [PATCH 2/2] Help compiler-rt find shared LLVM cmake files from
 llvm-cmake package

---
 compiler-rt/CMakeLists.txt              | 1 +
 compiler-rt/lib/builtins/CMakeLists.txt | 4 +++-
 2 files changed, 4 insertions(+), 1 deletion(-)

diff --git a/compiler-rt/CMakeLists.txt b/compiler-rt/CMakeLists.txt
index 17d7e4ffbdeb..62767f4b3610 100644
--- a/compiler-rt/CMakeLists.txt
+++ b/compiler-rt/CMakeLists.txt
@@ -18,6 +18,7 @@ list(INSERT CMAKE_MODULE_PATH 0
   "${CMAKE_CURRENT_SOURCE_DIR}/cmake/Modules"
   "${CMAKE_CURRENT_SOURCE_DIR}/../cmake"
   "${CMAKE_CURRENT_SOURCE_DIR}/../cmake/Modules"
+  "/usr/share/llvm/cmake/Modules"
   )
 
 if(CMAKE_CONFIGURATION_TYPES)
diff --git a/compiler-rt/lib/builtins/CMakeLists.txt b/compiler-rt/lib/builtins/CMakeLists.txt
index 971e94407a2c..7b93af84fe75 100644
--- a/compiler-rt/lib/builtins/CMakeLists.txt
+++ b/compiler-rt/lib/builtins/CMakeLists.txt
@@ -13,7 +13,9 @@ if (CMAKE_SOURCE_DIR STREQUAL CMAKE_CURRENT_SOURCE_DIR)
     "${CMAKE_SOURCE_DIR}/../../cmake"
     "${CMAKE_SOURCE_DIR}/../../cmake/Modules"
     "${CMAKE_SOURCE_DIR}/../../../cmake"
-    "${CMAKE_SOURCE_DIR}/../../../cmake/Modules")
+    "${CMAKE_SOURCE_DIR}/../../../cmake/Modules"
+    "/usr/share/llvm/cmake/Modules"
+  )
   include(base-config-ix)
   include(CompilerRTUtils)
 
-- 
2.31.1

